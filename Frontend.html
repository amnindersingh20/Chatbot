function restoreResponses() {
  console.log("Restoring saved responses...");

  // Restore all radio buttons
  $('input[type="radio"]').each(function () {
    const name = $(this).attr("name");
    const val = $(this).val();

    // Find stored value for this question
    // e.g. r1, r2, r3... are tied to q1a, q1b, etc.
    for (let i = 1; i <= 50; i++) { // safe upper bound
      const stored = sessionStorage.getItem("r" + i);
      if (stored !== null && stored === val) {
        $(this).prop("checked", true);
      }
    }
  });

  // Restore all checkboxes
  $('input[type="checkbox"]').each(function () {
    const val = $(this).val();

    for (let i = 1; i <= 50; i++) {
      const stored = sessionStorage.getItem("r" + i);
      if (stored !== null && stored === val) {
        $(this).prop("checked", true);
      }
    }
  });

  // Restore textareas / inputs with class form-control
  $('.form-control').each(function () {
    const id = $(this).attr("id");

    // Map IDs to their sessionStorage key
    const mapping = {
      "q2atext": "r6",
      "q2btext": "r7",
      "q2ctext": "r8",
      "q4text": "r15",
      "q5text": "r26",
      "q7text": "r41",
      "q8text": "r42"
    };

    const key = mapping[id];
    if (key && sessionStorage.getItem(key)) {
      $(this).val(sessionStorage.getItem(key));
    }

    // Restore visual state classes
    if ($(this).val() !== "") {
      $(this).addClass("enteredTextField").removeClass("emptyTextField");
    }
  });

  console.log("Response restoration complete");
}
