import boto3
import os
import sys

# Ensure AWS credentials and region are set in your environment, e.g.:
#   setx AWS_ACCESS_KEY_ID "YOUR_ACCESS_KEY_ID"
#   setx AWS_SECRET_ACCESS_KEY "YOUR_SECRET_ACCESS_KEY"
#   setx AWS_DEFAULT_REGION "us-east-1"
# Or configure via AWS CLI: aws configure


def detect_key_phrases(text, language_code='en'):
    """
    Detects key phrases in the given text using Amazon Comprehend.

    :param text: The input text to analyze.
    :param language_code: The language code of the input text (default 'en').
    :return: A list of detected key phrases with score.
    """
    client = boto3.client('comprehend')
    response = client.detect_key_phrases(
        Text=text,
        LanguageCode=language_code
    )
    return response.get('KeyPhrases', [])


def main():
    # Read text from command line argument or prompt
    if len(sys.argv) > 1:
        input_text = ' '.join(sys.argv[1:])
    else:
        input_text = input("Enter text to analyze for key phrases: ")

    print(f"Analyzing text: {input_text}\n")
    key_phrases = detect_key_phrases(input_text)
    if not key_phrases:
        print("No key phrases detected.")
    else:
        print("Detected Key Phrases:")
        for phrase in key_phrases:
            text = phrase['Text']
            score = phrase['Score']
            print(f" - {text} (Score: {score:.2f})")


if __name__ == '__main__':
    main()
